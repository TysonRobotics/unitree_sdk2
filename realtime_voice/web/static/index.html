<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Robot Voice Control</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 20px; line-height: 1.4; }
    h1 { margin-top: 0; }
    .row { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 12px; }
    button { padding: 10px 14px; font-size: 16px; cursor: pointer; }
    .toggle { background: #eee; }
    .danger { background: #f8d7da; }
    .ok { background: #d1e7dd; }
    .card { border: 1px solid #ddd; padding: 12px; border-radius: 8px; max-width: 680px; }
    input[type="range"] { width: 240px; }
    label { display: inline-block; width: 120px; }
  </style>
  <script>
    async function post(url, body) {
      const res = await fetch(url, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: body ? JSON.stringify(body) : '{}'
      });
      return res.json();
    }
    async function mute(val) {
      await post('/api/mute', { value: val });
    }
    async function toggleMute() {
      await post('/api/toggle_mute');
    }
    async function stopSpeak() {
      await post('/api/stop');
    }
    async function reloadAll() {
      await post('/api/reload');
    }
    async function setVolume(val) {
      document.getElementById('volLabel').innerText = val + '%';
      await post('/api/volume', { value: parseInt(val) });
    }
    async function volumeUp() { await post('/api/volume_up'); }
    async function volumeDown() { await post('/api/volume_down'); }
    async function setBargeIn(val) { await post('/api/barge_in', { value: val }); }
  </script>
  </head>
  <body>
    <h1>Robot Voice Control</h1>
    <div class="card">
      <h3>Microphone</h3>
      <div class="row">
        <button class="toggle" onclick="toggleMute()">Toggle Mute</button>
        <button class="ok" onclick="mute(false)">Unmute</button>
        <button class="danger" onclick="mute(true)">Mute</button>
      </div>
    </div>
    <br />
    <div class="card">
      <h3>Assistant</h3>
      <div class="row">
        <button onclick="stopSpeak()">Stop Speaking</button>
        <button class="danger" onclick="reloadAll()">Reload (Hard Reset)</button>
      </div>
    </div>
    <br />
    <div class="card">
      <h3>Volume</h3>
      <div class="row">
        <label>Output Volume</label>
        <input type="range" min="0" max="100" value="100" oninput="setVolume(this.value)" />
        <span id="volLabel">100%</span>
      </div>
      <div class="row">
        <button onclick="volumeDown()">-10%</button>
        <button onclick="volumeUp()">+10%</button>
      </div>
    </div>
    <br />
    <div class="card">
      <h3>Interaction Behavior</h3>
      <div class="row">
        <label>Barge-in</label>
        <button onclick="setBargeIn(true)">Enable</button>
        <button onclick="setBargeIn(false)">Disable</button>
      </div>
    </div>
  </body>
  </html>



